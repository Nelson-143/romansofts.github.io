<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" type="image/png" href="../assets/images/logos/favicon.svg" />
    <title>Daily Bible Verses</title>
    <style>
        :root{
            --bg:#f6f7fb; --card:#fff; --muted:#6b7280; --accent:#0ea5a4; --shadow:0 6px 18px rgba(16,24,40,0.08);
            --radius:12px; --gap:12px;
            --text-primary:#0f172a;
            --visitor-percent: 0; /* Hidden visitor progress */
        }
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            position: relative;
            overflow-x: hidden;
        }
        .dv-wrapper{
            max-width:760px; margin:28px auto; padding:16px; box-sizing:border-box;
            position: relative;
            z-index: 1;
        }
        .dv-card{
            background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
            padding:18px; display:flex; gap:16px; align-items:flex-start;
            position: relative;
            z-index: 2;
        }
        .dv-side{
            min-width:56px; display:flex; flex-direction:column; gap:8px; align-items:center;
        }
        .dv-icon{
            width:48px; height:48px; border-radius:10px; display:flex; align-items:center; justify-content:center;
            background:linear-gradient(180deg,rgba(14,165,164,0.12),rgba(14,165,164,0.06));
            color:var(--accent); font-weight:700; font-size:18px;
        }
        .dv-main{flex:1}
        .dv-header{
            display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:6px;
        }
        .dv-title{font-size:15px; font-weight:600; color:var(--text-primary)}
        .dv-meta{font-size:12px; color:var(--muted)}
        .dv-body{
            font-size:18px; line-height:1.45; color:var(--text-primary); margin:8px 0 12px;
        }
        .dv-controls{display:flex; gap:8px; flex-wrap:wrap}
        .dv-btn{
            background:transparent; border:1px solid #e6e9ef; padding:8px 10px; border-radius:9px;
            cursor:pointer; font-size:13px; color:var(--text-primary);
            transition: all 0.2s ease;
        }
        .dv-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .dv-btn.primary{background:var(--accent); color:#fff; border-color:transparent}
        .dv-small{font-size:13px; color:var(--muted)}
        .dv-dark{
            --bg:#0b1220; --card:#071127; --muted:#9aa4b2; --accent:#7ee7db; 
            --text-primary:#f1f5f9;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--muted);
        }
        .dv-dark .dv-card{box-shadow:none}
        .dv-toast{
            position:fixed; left:50%; transform:translateX(-50%); bottom:18px;
            background:#111827; color:#fff; padding:10px 14px; border-radius:10px; font-size:13px; opacity:0; pointer-events:none;
            transition:all .18s ease; z-index: 1000;
        }
        .dv-toast.show{opacity:1; transform:translateX(-50%) translateY(0)}
        
        /* Background elements */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        
        .dv-dark .background-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        
        .floating-cross {
            position: absolute;
            font-size: 24px;
            color: rgba(14, 165, 164, 0.15);
            animation: float 20s infinite linear;
            user-select: none;
            pointer-events: none;
        }
        
        .dv-dark .floating-cross {
            color: rgba(126, 231, 219, 0.15);
        }
        
        .floating-dove {
            position: absolute;
            font-size: 28px;
            color: rgba(255, 255, 255, 0.2);
            animation: float 25s infinite linear reverse;
            user-select: none;
            pointer-events: none;
        }
        
        .floating-bible {
            position: absolute;
            font-size: 22px;
            color: rgba(119, 221, 119, 0.15);
            animation: float 30s infinite linear;
            user-select: none;
            pointer-events: none;
        }
        
        .light-ray {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            animation: pulse 15s infinite alternate;
            pointer-events: none;
        }
        
        .dv-dark .light-ray {
            background: radial-gradient(circle, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 70%);
        }
        
        .verse-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 10;
            transition: all 0.3s ease;
        }
        
        .dv-dark .verse-counter {
            background: rgba(15, 23, 42, 0.9);
            color: #f1f5f9;
        }
        
        .verse-counter:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 1);
        }
        
        .dv-dark .verse-counter:hover {
            background: rgba(15, 23, 42, 1);
        }
        
        .background-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 10;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dv-dark .background-toggle {
            background: rgba(15, 23, 42, 0.9);
            color: #f1f5f9;
        }
        
        .background-toggle:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 1);
        }
        
        .dv-dark .background-toggle:hover {
            background: rgba(15, 23, 42, 1);
        }
        
        /* Footer with attribution */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            color: var(--muted);
            font-size: 14px;
            position: relative;
            z-index: 1;
        }
        
        .attribution {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .romansofts-logo {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #0ea5a4;
            background: rgba(14, 165, 164, 0.1);
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .dailyverses-link {
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .dailyverses-link:hover {
            text-decoration: underline;
        }
        
        /* Gamification Elements */
        .motivation-container {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 10;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            max-width: 200px;
        }
        
        .dv-dark .motivation-container {
            background: rgba(15, 23, 42, 0.9);
            color: #f1f5f9;
        }
        
        .motivation-container:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 1);
        }
        
        .dv-dark .motivation-container:hover {
            background: rgba(15, 23, 42, 1);
        }
        
        .motivation-icon {
            color: #ff6b35;
            animation: pulse-fire 2s infinite;
        }
        
        .achievement-badge {
            position: fixed;
            bottom: 70px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 10;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .dv-dark .achievement-badge {
            background: rgba(15, 23, 42, 0.9);
            color: #f1f5f9;
        }
        
        .achievement-badge.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .achievement-icon {
            color: gold;
            font-size: 18px;
        }
        
        .motivational-quote {
            text-align: center;
            margin: 15px 0;
            font-style: italic;
            color: var(--muted);
            font-size: 14px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(14, 165, 164, 0.05);
            transition: all 0.3s ease;
        }
        
        .dv-dark .motivational-quote {
            background: rgba(126, 231, 219, 0.05);
        }
        
        .progress-container {
            margin: 15px 0;
            background: rgba(14, 165, 164, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .dv-dark .progress-container {
            background: rgba(126, 231, 219, 0.1);
        }
        
        .progress-title {
            font-size: 14px;
            color: var(--muted);
            margin-bottom: 8px;
        }
        
        .progress-bar {
            height: 8px;
            background: rgba(14, 165, 164, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .dv-dark .progress-bar {
            background: rgba(126, 231, 219, 0.2);
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            font-size: 12px;
            color: var(--muted);
        }
        
        .daily-challenge {
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid gold;
        }
        
        .dv-dark .daily-challenge {
            background: rgba(255, 215, 0, 0.05);
        }
        
        .challenge-title {
            font-size: 14px;
            font-weight: 600;
            color: #b8860b;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .challenge-text {
            font-size: 13px;
            color: var(--muted);
        }
        
        .challenge-complete {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-top: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .challenge-complete:hover {
            transform: scale(1.05);
        }
        
        .share-section {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(14, 165, 164, 0.05);
            border-radius: 10px;
        }
        
        .dv-dark .share-section {
            background: rgba(126, 231, 219, 0.05);
        }
        
        .share-title {
            font-size: 14px;
            color: var(--muted);
            margin-bottom: 10px;
        }
        
        .share-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .next-visit-motivation {
            text-align: center;
            margin: 15px 0;
            padding: 12px;
            background: rgba(14, 165, 164, 0.08);
            border-radius: 8px;
            font-size: 13px;
            color: var(--muted);
            font-style: italic;
        }
        
        .dv-dark .next-visit-motivation {
            background: rgba(126, 231, 219, 0.08);
        }
        
        /* Saved Verses Section */
        .saved-verses-section {
            margin: 20px 0;
            background: rgba(14, 165, 164, 0.05);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
        }
        
        .dv-dark .saved-verses-section {
            background: rgba(126, 231, 219, 0.05);
        }
        
        .saved-verses-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--muted);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }
        
        .saved-verses-toggle {
            font-size: 16px;
            transition: transform 0.3s ease;
        }
        
        .saved-verses-toggle.rotated {
            transform: rotate(180deg);
        }
        
        .saved-verses-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        
        .saved-verses-list.expanded {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .saved-verse-item {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 3px solid var(--accent);
            transition: all 0.2s ease;
        }
        
        .dv-dark .saved-verse-item {
            background: rgba(15, 23, 42, 0.7);
        }
        
        .saved-verse-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .saved-verse-ref {
            font-size: 12px;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .saved-verse-text {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-primary);
        }
        
        .saved-verse-date {
            font-size: 11px;
            color: var(--muted);
            margin-top: 5px;
            text-align: right;
        }
        
        .no-saved-verses {
            text-align: center;
            color: var(--muted);
            font-style: italic;
            padding: 20px;
        }
        
        /* Flower Animation */
        .flower {
            position: fixed;
            font-size: 24px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
        }
        
        /* Hidden Visitor Counter Styles */
        .visitor-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, 
                var(--accent) 0%, 
                var(--accent) calc(var(--visitor-percent) * 1%), 
                transparent calc(var(--visitor-percent) * 1%), 
                transparent 100%);
            z-index: 1000;
            pointer-events: none;
            opacity: 0.3;
        }
        
        .secret-message {
            position: fixed;
            bottom: 10px;
            left: 10px;
            font-size: 11px;
            color: rgba(0,0,0,0.15);
            font-family: monospace;
            z-index: 0;
            pointer-events: none;
            user-select: none;
            background: rgba(255,255,255,0.7);
            padding: 3px 6px;
            border-radius: 4px;
        }
        
        .dv-dark .secret-message {
            color: rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.3);
        }
        
        @keyframes flowerFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            80% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(20px, 40px) rotate(90deg);
            }
            50% {
                transform: translate(40px, 0) rotate(180deg);
            }
            75% {
                transform: translate(20px, -40px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }
        
        @keyframes pulse {
            0% {
                opacity: 0.3;
            }
            100% {
                opacity: 0.7;
            }
        }
        
        @keyframes pulse-fire {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }
        
        @keyframes confetti {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent);
            opacity: 0;
            z-index: 1000;
        }
        
        @media (max-width:560px){
            .dv-card{padding:14px}
            .dv-body{font-size:16px}
            .verse-counter, .background-toggle, .motivation-container, .achievement-badge {
                position: relative;
                top: auto;
                right: auto;
                bottom: auto;
                left: auto;
                margin: 10px 0;
                display: inline-block;
            }
            .attribution {
                flex-direction: column;
                gap: 5px;
            }
            .saved-verse-text {
                font-size: 13px;
            }
            .secret-message {
                font-size: 9px;
                bottom: 5px;
                left: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="background-container" id="backgroundContainer">
        <div class="light-ray"></div>
        <!-- Floating elements will be added here by JavaScript -->
    </div>
    
    <!-- Hidden Visitor Counter Elements -->
    <div class="visitor-indicator" id="visitorIndicator"></div>
    <div class="secret-message" id="secretMessage">number</div>
    
    <div class="motivation-container" id="motivationContainer">
        <span class="motivation-icon">üåü</span>
        <span id="motivationText">God's Word is alive!</span>
    </div>
    
    <div class="verse-counter" id="verseCounter">
        Verses Saved: <span id="savedCount">0</span>
    </div>
    
    <div class="achievement-badge" id="achievementBadge">
        <span class="achievement-icon">üèÜ</span>
        <span id="achievementText">New Achievement!</span>
    </div>
    
    <div class="background-toggle" id="backgroundToggle">
        Toggle Background
    </div>

    <div class="dv-wrapper" id="dailyVerseContainer">
        <div class="dv-card" id="dvCard" aria-live="polite">
            <div class="dv-side">
                <div class="dv-icon">B</div>
                <div class="dv-small dv-meta" id="dvLang">niv</div>
            </div>

            <div class="dv-main">
                <div class="dv-header">
                    <div>
                        <div class="dv-title">Daily Verse</div>
                        <div class="dv-small dv-meta" id="dvRef">Loading‚Ä¶</div>
                    </div>
                    <div class="dv-controls" id="dvControls">
                        <button class="dv-btn" id="dvCopy" title="Copy verse">Copy</button>
                        <button class="dv-btn" id="dvSave" title="Save to favorites">Save</button>
                        <button class="dv-btn" id="dvToggleSize" title="Toggle text size">A</button>
                        <button class="dv-btn" id="dvToggleTheme" title="Toggle theme">Theme</button>
                    </div>
                </div>
                
                <div class="motivational-quote" id="motivationalQuote">
                    "Your word is a lamp for my feet, a light on my path." - Psalm 119:105
                </div>

                <!-- Where the external script will inject the verse -->
                <div id="dailyVersesWrapper"></div>
                
                <div class="share-section">
                    <div class="share-title">Bless someone today</div>
                    <button class="share-btn" id="shareBtn">
                        üì§ Share This Verse
                    </button>
                </div>
                
                <!-- Saved Verses Section -->
                <div class="saved-verses-section">
                    <div class="saved-verses-title" id="savedVersesToggle">
                        <span>üìñ Your Saved Verses (<span id="savedCountDisplay">0</span>)</span>
                        <span class="saved-verses-toggle">‚ñº</span>
                    </div>
                    <div class="saved-verses-list" id="savedVersesList">
                        <!-- Saved verses will be populated here -->
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-title">Your Spiritual Journey</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Every visit brings you closer to God</div>
                </div>
                
                <div class="daily-challenge">
                    <div class="challenge-title">
                        <span>üåü</span> Today's Reflection
                    </div>
                    <div class="challenge-text" id="challengeText">
                        How does today's verse speak to your current situation?
                    </div>
                    <div class="challenge-complete" id="challengeComplete">
                        I've Reflected
                    </div>
                </div>
                
                <div class="next-visit-motivation" id="nextVisitMotivation">
                    See you tomorrow for more wisdom from God's Word! ‚ú®
                </div>

                <div class="dv-small dv-meta" id="dvSavedCount" style="margin-top:8px"></div>
            </div>
        </div>
        
        <div class="footer">
            <div>Powered by</div>
            <div class="attribution">
                <a href="https://nelson-143.github.io/romansofts.github.io/html/index.html" target="_blank" rel="noopener noreferrer" aria-label="ROMANSOFTS homepage" style="text-decoration:none;">
                    <div class="romansofts-logo" style="width:65px;height:65px;overflow:hidden;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;background:rgba(14,165,164,0.08);">
                        <!-- Fallback text if image doesn't load -->
                        <img src="../assets/images/romn.jpg" alt="ROMANSOFTS logo" loading="lazy"
     style="width:100%;height:100%;object-fit:contain;display:block;" />
                    </div>
                </a>
                <div>‚Ä¢</div>
              
            </div>
        </div>
    </div>

    <!-- toast -->
    <div class="dv-toast" id="dvToast"></div>

    <!-- original script (keeps existing behavior) -->
    <script async defer src="https://dailyverses.net/get/verse.js?language=niv"></script>

    <script>
        // Simple helper functions
        const el = id => document.getElementById(id);
        const toast = (msg) => {
            const t = el('dvToast');
            t.textContent = msg; t.classList.add('show');
            clearTimeout(t._timeout);
            t._timeout = setTimeout(()=> t.classList.remove('show'), 2200);
        };

        // ========== HIDDEN VISITOR COUNTER ==========
        const visitorKey = 'dv-hidden-visitor-count';
        
        function updateHiddenVisitorCount() {
            let count = parseInt(localStorage.getItem(visitorKey) || '0');
            count++;
            localStorage.setItem(visitorKey, count.toString());
            
            updateEnhancedVisitorCount(count);
        }
        
        function updateEnhancedVisitorCount(count) {
            // Update progress bar based on count (resets every 1000 visitors)
            const percent = (count % 1000) / 10;
            document.documentElement.style.setProperty('--visitor-percent', percent);
            
            // Convert count to Roman numerals for the secret message
            const romanCount = toRomanNumerals(count);
            el('secretMessage').textContent = `number:${romanCount}`;
            
            // Hidden in console for debugging
            updateConsoleHint(count);
        }
        
        function toRomanNumerals(num) {
            const roman = {
                M: 1000, CM: 900, D: 500, CD: 400, C: 100, XC: 90,
                L: 50, XL: 40, X: 10, IX: 9, V: 5, IV: 4, I: 1
            };
            let str = '';
            for (let i of Object.keys(roman)) {
                const q = Math.floor(num / roman[i]);
                num -= q * roman[i];
                str += i.repeat(q);
            }
            return str;
        }
        
        function updateConsoleHint(count) {
            if (count % 50 === 0) {
                console.log(`%cVisitor Milestone: ${count}`, 
                           'background: #0ea5a4; color: white; padding: 5px; border-radius: 3px;');
            }
        }
        
        // Initialize hidden counter
        updateHiddenVisitorCount();

        // Read/Write favorites to localStorage
        const favoritesKey = 'dv-favorites-v1';
        const getFavorites = () => {
            try { return JSON.parse(localStorage.getItem(favoritesKey) || '[]') } catch(e){ return [] }
        };
        const saveFavorite = (text, ref) => {
            const f = getFavorites();
            f.unshift({text, ref, created:Date.now()});
            localStorage.setItem(favoritesKey, JSON.stringify(f.slice(0,50)));
            updateVerseCounter();
            updateSavedVersesDisplay();
            el('dvSavedCount').textContent = `${f.length} saved`;
            
            // Show motivation when saving
            if (f.length % 5 === 0) {
                showAchievement('Verse Collector!', `You've saved ${f.length} verses!`);
            }
        };

        // Update saved count display
        const updateVerseCounter = () => {
            const count = getFavorites().length;
            el('savedCount').textContent = count;
            el('savedCountDisplay').textContent = count;
            el('dvSavedCount').textContent = `${count} saved`;
            
            // Animate the counter when it changes
            const counter = el('verseCounter');
            counter.style.transform = 'scale(1.1)';
            setTimeout(() => {
                counter.style.transform = 'scale(1)';
            }, 300);
        };

        // Update saved verses display
        const updateSavedVersesDisplay = () => {
            const savedVersesList = el('savedVersesList');
            const favorites = getFavorites();
            
            if (favorites.length === 0) {
                savedVersesList.innerHTML = '<div class="no-saved-verses">No saved verses yet. Click "Save" to add verses to your collection!</div>';
                return;
            }
            
            savedVersesList.innerHTML = favorites.map((verse, index) => `
                <div class="saved-verse-item">
                    <div class="saved-verse-ref">${verse.ref || 'Bible Verse'}</div>
                    <div class="saved-verse-text">${verse.text}</div>
                    <div class="saved-verse-date">${new Date(verse.created).toLocaleDateString()}</div>
                </div>
            `).join('');
        };

        // Initialize the verse counter and saved verses display
        updateVerseCounter();
        updateSavedVersesDisplay();

        // Toggle saved verses section
        el('savedVersesToggle').addEventListener('click', () => {
            const list = el('savedVersesList');
            const toggle = el('savedVersesToggle').querySelector('.saved-verses-toggle');
            
            list.classList.toggle('expanded');
            toggle.classList.toggle('rotated');
        });

        // Theme toggle - FIXED DARK MODE TEXT COLOR
        let isLarge = false;
        el('dvToggleTheme').addEventListener('click', ()=> {
            const container = document.getElementById('dailyVerseContainer');
            container.classList.toggle('dv-dark');
            document.body.classList.toggle('dv-dark');
        });

        // Text size toggle
        el('dvToggleSize').addEventListener('click', ()=> {
            isLarge = !isLarge;
            const b = document.querySelector('#dailyVerseContainer .dv-body');
            if(b) b.style.fontSize = isLarge ? '20px' : '';
        });

        // Copy button
        el('dvCopy').addEventListener('click', ()=>{
            const body = document.querySelector('#dailyVerseContainer .dv-body');
            if(!body){ toast('No verse to copy'); return; }
            const text = (body.innerText || body.textContent || '').trim();
            if(!text){ toast('No verse to copy'); return; }
            navigator.clipboard?.writeText(text).then(()=> toast('Copied to clipboard')).catch(()=> toast('Copy failed'));
        });

        // Save button
        el('dvSave').addEventListener('click', ()=>{
            const body = document.querySelector('#dailyVerseContainer .dv-body');
            const ref = el('dvRef').textContent || '';
            if(!body){ toast('Nothing to save'); return; }
            saveFavorite(body.innerText.trim(), ref);
            toast('Verse saved! üíæ');
            
            // Add a visual effect when saving
            const saveBtn = el('dvSave');
            saveBtn.style.backgroundColor = '#0ea5a4';
            saveBtn.style.color = 'white';
            setTimeout(() => {
                saveBtn.style.backgroundColor = '';
                saveBtn.style.color = '';
            }, 500);
        });

        // Share button
        el('shareBtn').addEventListener('click', ()=>{
            const body = document.querySelector('#dailyVerseContainer .dv-body');
            if(!body){ toast('No verse to share'); return; }
            const text = (body.innerText || body.textContent || '').trim();
            if(!text){ toast('No verse to share'); return; }
            
            const shareUrl = 'https://nelson-143.github.io/romansofts.github.io/html/bible.html';
            const shareText = `Daily Bible Verse: ${text}\n\nRead more at: ${shareUrl}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Daily Bible Verse',
                    text: text,
                    url: shareUrl
                }).then(() => {
                    toast('Shared successfully! üôè');
                }).catch(() => {
                    // Fallback to clipboard
                    navigator.clipboard?.writeText(shareText).then(() => 
                        toast('Verse copied to share! üì§')
                    ).catch(() => toast('Share failed'));
                });
            } else {
                // Fallback to clipboard
                navigator.clipboard?.writeText(shareText).then(() => 
                    toast('Verse copied to share! üì§')
                ).catch(() => toast('Share failed'));
            }
        });

        // Observe the injected script content and enhance UI
        const target = el('dailyVersesWrapper');
        const observer = new MutationObserver((mutations)=>{
            if(!target || !target.childNodes.length) return;
            // move the injected nodes into our styled body if not already
            let dvBody = document.querySelector('#dailyVerseContainer .dv-body');
            if(!dvBody){
                dvBody = document.createElement('div');
                dvBody.className = 'dv-body';
                // move all nodes from target into dvBody
                while(target.firstChild){
                    dvBody.appendChild(target.firstChild);
                }
                target.appendChild(dvBody);
            }
            // try to extract a verse reference (common patterns)
            const text = dvBody.innerText.trim();
            // Attempt to find "Book Chapter:Verse" by simple regex
            const refMatch = text.match(/([1-3]?\s?[A-Za-z]+)\s+\d+[:.]\d+/);
            const firstLine = text.split(/\n/).map(s=>s.trim()).filter(Boolean)[0] || '';
            el('dvRef').textContent = refMatch ? refMatch[0] : (firstLine.length>50 ? firstLine.slice(0,50)+'‚Ä¶' : firstLine);
            // update saved count
            updateVerseCounter();
            observer.disconnect(); // run once per injection
            
            // Show welcome message for first visit today
            showDailyWelcome();
        });
        observer.observe(target, {childList:true, subtree:true});

        // In case the script already finished before observer was attached
        if(target.childNodes.length) {
            // small delay to let any rendering finalize
            setTimeout(()=> observer.takeRecords() && observer.disconnect() , 150);
        }

        // Background creation and animation
        function createFloatingElements() {
            const container = el('backgroundContainer');
            const symbols = ['‚úù', '‚úû', '‚úü', 'üôè', 'ü§≤', '‚ú®', '‚ò¶', '‚ú†', '‚úô', '‚úö', '‚úõ', '‚úú', '‚ú¢', '‚ú£', '‚ú§', 'üïä', 'üìñ', '‚ú°'];
            
            // Create multiple floating elements
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                const symbol = symbols[Math.floor(Math.random() * symbols.length)];
                
                // Assign different classes based on symbol type
                if (symbol === 'üïä') {
                    element.className = 'floating-dove';
                } else if (symbol === 'üìñ') {
                    element.className = 'floating-bible';
                } else {
                    element.className = 'floating-cross';
                }
                
                element.textContent = symbol;
                element.style.left = `${Math.random() * 100}%`;
                element.style.top = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.fontSize = `${20 + Math.random() * 20}px`;
                
                container.appendChild(element);
            }
        }

        // Toggle background visibility
        let backgroundVisible = true;
        el('backgroundToggle').addEventListener('click', () => {
            backgroundVisible = !backgroundVisible;
            const container = el('backgroundContainer');
            container.style.opacity = backgroundVisible ? '1' : '0';
            el('backgroundToggle').textContent = backgroundVisible ? 'Hide Background' : 'Show Background';
        });

        // Initialize the background
        createFloatingElements();

        // ========== MOTIVATIONAL FEATURES ==========
        
        // Motivational messages that rotate
        const motivationMessages = [
            "God's Word is alive!",
            "Daily bread for your soul",
            "Growing in faith daily",
            "Your spiritual journey matters",
            "Blessed to be a blessing",
            "Strength for today, hope for tomorrow",
            "Walking in God's light",
            "Transformed by His Word"
        ];
        
        let currentMotivationIndex = 0;
        function rotateMotivation() {
            currentMotivationIndex = (currentMotivationIndex + 1) % motivationMessages.length;
            el('motivationText').textContent = motivationMessages[currentMotivationIndex];
        }
        
        // Rotate every 8 seconds
        setInterval(rotateMotivation, 8000);
        
        // Next visit motivations
        const nextVisitMessages = [
            "See you tomorrow for more wisdom from God's Word! ‚ú®",
            "Your daily spiritual discipline is changing you! üå±",
            "Come back tomorrow for fresh inspiration! üí´",
            "God has new mercies for you every morning! üåÖ",
            "Your consistency is building spiritual strength! üí™",
            "Tomorrow brings another opportunity to grow! üìñ"
        ];
        
        function showNextVisitMotivation() {
            const randomIndex = Math.floor(Math.random() * nextVisitMessages.length);
            el('nextVisitMotivation').textContent = nextVisitMessages[randomIndex];
        }
        
        // Daily welcome message
        function showDailyWelcome() {
            const hours = new Date().getHours();
            let greeting = "Good morning!";
            if (hours >= 12 && hours < 17) greeting = "Good afternoon!";
            if (hours >= 17) greeting = "Good evening!";
            
            const welcomeMessages = [
                `${greeting} God's Word is fresh today!`,
                `${greeting} Your daily spiritual nourishment is here!`,
                `${greeting} Ready to be inspired?`,
                `${greeting} Time for wisdom from above!`
            ];
            
            const randomWelcome = welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];
            toast(randomWelcome);
            
            // Show next visit motivation after a delay
            setTimeout(showNextVisitMotivation, 3000);
        }
        
        // Achievement system
        const showAchievement = (title, subtitle) => {
            const badge = el('achievementBadge');
            badge.querySelector('#achievementText').textContent = title;
            badge.classList.add('show');
            
            // Change motivational quote
            const quotes = [
                '"I can do all this through him who gives me strength." - Philippians 4:13',
                '"The Lord is my strength and my shield." - Psalm 28:7',
                '"Your word is a lamp for my feet, a light on my path." - Psalm 119:105',
                '"Do not be anxious about anything." - Philippians 4:6',
                '"Trust in the Lord with all your heart." - Proverbs 3:5'
            ];
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            el('motivationalQuote').textContent = randomQuote;
            
            setTimeout(() => {
                badge.classList.remove('show');
            }, 3000);
        };
        
        // Flower celebration animation
        const createFlowerCelebration = () => {
            const flowers = ['üå∏', 'üå∫', 'üåª', 'üåº', 'üå∑', 'üíÆ', 'üèµÔ∏è', 'ü•Ä', 'üåπ'];
            const container = document.body;
            
            for (let i = 0; i < 25; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
                flower.style.left = `${Math.random() * 100}vw`;
                flower.style.fontSize = `${20 + Math.random() * 20}px`;
                flower.style.animation = `flowerFall ${3 + Math.random() * 2}s forwards`;
                flower.style.animationDelay = `${Math.random() * 0.5}s`;
                
                container.appendChild(flower);
                
                setTimeout(() => {
                    flower.remove();
                }, 5000);
            }
        };
        
        // Confetti effect
        const createConfetti = () => {
            const colors = ['#0ea5a4', '#f59e0b', '#ef4444', '#8b5cf6', '#10b981'];
            const container = document.body;
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animation = `confetti ${1 + Math.random() * 2}s forwards`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                
                container.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        };
        
        // Daily challenge
        el('challengeComplete').addEventListener('click', function() {
            this.textContent = 'Reflection Completed! üåü';
            this.style.backgroundColor = '#10b981';
            showAchievement('Deep Thinker!', 'You reflected on God\'s Word!');
            
            // Create beautiful flower celebration
            createFlowerCelebration();
            
            // Also add some confetti for extra celebration
            createConfetti();
            
            // Disable after completion
            this.style.pointerEvents = 'none';
        });
        
        // Rotate challenges
        const challenges = [
            "How does today's verse speak to your current situation?",
            "What is God saying to you through this verse today?",
            "How can you apply this verse in your life today?",
            "What promise or encouragement do you find in this verse?",
            "How does this verse challenge or comfort you?"
        ];
        
        const todayChallengeIndex = new Date().getDate() % challenges.length;
        el('challengeText').textContent = challenges[todayChallengeIndex];
        
        // Progress based on visits (simple version)
        function updateProgress() {
            const visitCount = parseInt(localStorage.getItem('dv-visit-count') || '0') + 1;
            localStorage.setItem('dv-visit-count', visitCount.toString());
            
            // Simple progress indicator
            const progress = Math.min(visitCount, 7);
            const progressPercent = (progress / 7) * 100;
            
            el('progressFill').style.width = `${progressPercent}%`;
            
            // Show achievement for consistent visits
            if (visitCount === 3) {
                showAchievement('Growing Consistent!', '3 days in God\'s Word!');
            } else if (visitCount === 7) {
                showAchievement('Weekly Warrior!', '7 days of faithfulness!');
                createConfetti();
            }
        }
        
        // Initialize motivational features
        updateProgress();
        rotateMotivation();
    </script>
</body>
</html>